<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width; height=device-height; initial-scale=1.0; minimum-scale=1.0; maximum-scale=1.0; user-scalable=no;"/>
		<title>NARB</title>
		<link href="css/jquery.mobile-1.4.2.min.css" rel="stylesheet"/>
		<script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
		<script type="text/javascript" src="js/jquery.mousewheel.min.js"></script>
		<script type="text/javascript" src="js/jquery.mobile-1.4.2.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
		<script type="text/javascript" charset="utf-8">
			$(document).ready(function() {
				$("#log").append("ready");
				onLoad();
			});
			
			// Wait for device API libraries to load
			//
			function onLoad() {
				$("#log").append("<br/>onLoad");
				document.addEventListener("deviceready", onDeviceReady, false);
			}
			
			// device APIs are available
			//
			function onDeviceReady() {
				$("#log").append("<br/>onDeviceReady");
				
				// Now safe to use device APIs
				document.addEventListener("pause", onPause, false);
				document.addEventListener("resign", onResign, false);//iOS
				document.addEventListener("resume", onResume, false);
				document.addEventListener("active", onActive, false);//iOS
				document.addEventListener("backbutton", onBackKeyDown, false);
				document.addEventListener("menubutton", onMenuKeyDown, false);
				document.addEventListener("searchbutton", onSearchKeyDown, false);
				document.addEventListener("startcallbutton", onStartCallKeyDown, false);
				document.addEventListener("endcallbutton", onEndCallKeyDown, false);
				document.addEventListener("volumedownbutton", onVolumeDownKeyDown, false);
				document.addEventListener("volumeupbutton", onVolumeUpKeyDown, false);
			}
			
			// Handle the pause event
			//
			function onPause() {
				$("#log").append("<br/>onPause");
			}
			
			// Handle the resign event
			//
			function onResign() {
				$("#log").append("<br/>onResign");
			}
			
			// Handle the resume event
			//
			function onResume() {
				$("#log").append("<br/>onResume");
			}
			
			// Handle the active event
			//
			function onActive() {
				$("#log").append("<br/>onActive");
			}
			
			// Handle the back button
			//
			function onBackKeyDown() {
				$("#log").append("<br/>onBackKeyDown");
				// start image capture
				navigator.device.capture.captureImage(captureSuccess, captureError, {limit:2});
			}
			
			// Handle the menu button
			//
			function onMenuKeyDown() {
				$("#log").append("<br/>onMenuKeyDown");
				navigator.notification.vibrate(1000);
			}
			
			// Handle the search button
			//
			function onSearchKeyDown() {
				$("#log").append("<br/>onSearchKeyDown");
			}
			
			// Handle the start call button
			//
			function onStartCallKeyDown() {
				$("#log").append("<br/>onStartCallKeyDown");
			}
			
			// Handle the end call button
			//
			function onEndCallKeyDown() {
				$("#log").append("<br/>onEndCallKeyDown");
			}
			
			// Handle the volume down button
			//
			function onVolumeDownKeyDown() {
				$("#log").append("<br/>onVolumeDownKeyDown");
			}
			
			// Handle the volume up button
			//
			function onVolumeUpKeyDown() {
				$("#log").append("<br/>onVolumeUpKeyDown");
			}
			
			// capture callback
			function captureSuccess(mediaFiles) {
				$("#log").append("<br/>captureSuccess");
				var i, path, len;
				for (i = 0, len = mediaFiles.length; i < len; i += 1) {
					path = mediaFiles[i].fullPath;
					$("#log").append(" " + path);
				}
			}
			
			// capture error callback
			function captureError(error) {
				$("#log").append("<br/>captureError" + 'Error code: ' + error.code, null, 'Capture Error');
				navigator.notification.alert('Error code: ' + error.code, null, 'Capture Error');
			}
		</script>
	</head>
	<body>
		<div id="log"></div>
	</body>
</html>
